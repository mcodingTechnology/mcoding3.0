function global_memberLogin(i){function e(e){global_vueGetJson({url:workSpace.jsonUrl+"/member/front/loginByOpenid",data:{openid:e},success:function(e){"00"!=e.status?t():a(e,i)}})}function t(){global_vueGetJson({url:workSpace.jsonUrl+"/front/createOauthUrlForWxUserInfo",data:{url:window.location.href},success:function(i){window.location.href=i.data}})}function a(i,e){vm.$set("memberDetail",i),window.localStorage.setItem("memberDetail",JSON.stringify(i)),setTimeout(function(){e?e():null},0)}global_vueGetJson({url:workSpace.jsonUrl+"/member/front/findCurrentMember",success:function(s){var l=JSON.parse(window.localStorage.getItem("memberDetail"));"00"!=s.status?l&&l.data.wxMember?e(l.data.wxMember.wxOpenid):t():a(s,i)}})}function global_getMemberPoint(){global_vueGetJson({url:workSpace.jsonUrl+"memberLevel/front/findMemberLevelAndPoint",success:function(i){vm.$set("memberPoint","00"==i.status?i.data.totalPoint:0)}})}function global_keepSize(i){function e(){$("html").css({"font-size":16*$(window).width()/t})}var t=i?i:320;e(),$(window).resize(function(){e()})}function project_vueComponent(){Vue.component("tp-loading-mask",Vue.extend({props:["bgc","hidden"],template:'<div tp-loading-mask class="bui_inline bui_ta_c bui_vm bui_bgc_{{bgc||\'white\'}}" style="position: absolute;width: 100%;height: 100%;left: 0;right: 0;top: 0;bottom: 0;z-index: 1000; display:{{hidden?\'none\':\'block\'}}"><i style="width: 0;height: 100%;"></i><div><i class="fa fa-circle-o-notch fa-fw fa-spin bui_ts_32 bui_tc_white_d64_i"></i></div><i style="width: 0;height: 100%;"></i></div>'})),Vue.component("tp-footer-nav",Vue.extend({data:function(){return{queryResult:[{title:"积分商城",icon:"fa-gift",link:"gift_index.html",channel:"gift"},{title:"我的订单",icon:"fa-file-text-o",link:"order_list.html",channel:"order"},{title:"首页",icon:"fa-home",link:"index.html",center:!0,channel:"home"},{title:"全部商品",icon:"fa-cubes",link:"product_list.html",channel:"product"},{title:"个人中心",icon:"fa-user",link:"member_index.html",channel:"member_index"}],pathname:window.location.pathname}},props:[],template:'<div class="bui_mo_f bui_bgc_black bui_tc_white bui_tc_white_a bui_ta_c bui_bds_1_t bui_bdc_black_l72"><div class="bui_avg_5" style="overflow: visible;"><div v-for="data in queryResult" style="overflow: visible;">	<a href="{{data.link}}" class="bui_block bui_p_8 {{pathname.indexOf(data.channel)!=-1?\'bui_tc_red_a\':\'\'}}" v-if="!data.center" style="position: relative;">		<i class="fa {{data.icon}} fa-fw bui_ts_24"></i>		<p class="bui_ts_12">{{data.title}}</p>	</a>	<a href="index.html" class="mr-nav-home bui_round" v-else>		<div>			<i class="fa fa-home fa-fw bui_ts_32 bui_tc_black"></i>			<p class="bui_ts_12 bui_tc_black">首页</p>		</div>	</a></div></div></div>'})),Vue.component("tp-plug-cart",Vue.extend({props:["name","cartsize","bottom","class"],template:'<div v-if="cartsize!=0" style="position: fixed;z-index:1;left: 1rem;right: 1rem;bottom: {{bottom||5}}rem; display:{{cartsize?\'block\':\'none\'}}"><div class="bui_bgc_black_f72 bui_p_12 bui_radius bui_tc_white" onclick = "global_showSidePanel(\'modal_cart\',null,\'100%\',null,\'{{name}}\');"> 	<div class="bui_media bui_vm">		<div class="bui_media_l"><button class="bui_btn bui_btn_24 bui_btn_sq bui_bds_0"><i class="fa fa-cart-plus fa-fw bui_tc_white_i bui_ts_20_i"></i></button>		</div>		<div class="bui_media_b">			<p class="bui_ts_12">您的{{name}}里有 <span class="bui_tc_yellow bui_ts_14">{{cartsize}}</span> 件商品未结算</p>		</div>		<div class="bui_media_r"><button class="bui_btn bui_btn_24 bui_bgc_red">马上结算</button></div>	</div>	</div></div>'})),Vue.component("tp-copyright",Vue.extend({props:["brandname"],template:'<div class="bui_pt_24 bui_pb_48 bui_bgc_black_l72 bui_ta_c bui_tc_white">	<p class="bui_ts_12">版权所有 @ '+vueData.global.brandName+"</p></div>"})),Vue.component("tp-loadingmask",Vue.extend({props:["hide"],template:'<div class="bui_bgc_black bui_inline bui_vm bui_ta_c bui_tc_white_f64" :class="[hide?\'gym-hide\':\'\']" style="width: 100%;height: 100%;position: fixed;left: 0;top: 0;right: 0;bottom: 0;z-index: 999;">	<i style="width: 0%;height: 100%;"></i>	<div><p><i class="fa fa-circle-o-notch fa-spin bui_ts_48_i"></i></p><p class="bui_mt_12">laoding...</p></div>	<i style="width: 0%;height: 100%;"></i></div>'})),Vue.component("tp-plug-follow",Vue.extend({props:null,data:function(){return{isSubscribe:vueData.isSubscribe,brandName:vueData.global.brandName,isShow:!0}},template:'<div class="bui_media bui_vm bui_bgc_white bui_p_8 bui_tc_black">		<div class="bui_media_l">			<img src="./images/logo-s.png" class="bui_bgc_black bui_radius bui_fl" style="height: 2rem;" />		</div>		<div class="bui_media_b">			<h1 class="bui_ts_14">{{brandName}}微信公众号</h1>		</div>		<div class="bui_media_r">			<button onclick="global_showQrcode();" class="bui_btn bui_btn_32 bui_bds_0 bui_radius bui_bgc_red bui_tc_white bui_ts_14 bui_bgc_white">立即关注</button>			<button class="bui_btn bui_btn_32 bui_btn_sq bui_bds_0 bui_radius bui_bgc_black" onclick="vm.$set(\'isSubscribe\',1);"><i class="fa fa-close fa-fw"></i></button>		</div>	</div>'})),Vue.component("tp-header",Vue.extend({props:["title","titlelink","logo","bgc","lefticon","leftlink","righticon","rightlink"],template:'<div class="bui_media bui_vm {{bgc||\'bui_bgc_black\'}} bui_tc_white bui_tc_white_i bui_tc_white_a" id="globalHeader">	<div class="bui_media_l">		<a href="{{leftlink||\'javascript:;\'}}" class="bui_btn bui_btn_32 bui_btn_sq bui_bds_0 bui_m_8"><i class="fa {{lefticon||\'\'}} fa-fw"></i></a>	</div>	<div class="bui_media_b">		<a href="{{titlelink?titlelink:\'javascript:;\'}}" class="bui_inline bui_vm bui_ta_c bui_ts_14 bui_block">{{{title}}}<img :src="logo || \'./images/seize.png\'" v-if="logo" style="height:2rem"/></a>	</div>	<div class="bui_media_r">		<a href="{{rightlink||\'javascript:;\'}}" class="bui_btn bui_btn_32 bui_btn_sq bui_bds_0 bui_m_8"><i class="fa {{righticon||\'\'}} fa-fw"></i></a>	</div></div>'})),Vue.component("tp-loadingbar",Vue.extend({props:["type","bgc","class"],template:'<div class="bui_p_24 bui_ta_c {{bgc||\'\'}} {{class||\'\'}} bui_tc_white_d64" v-if="type==\'loading\'"><i class="fa fa-circle-o-notch fa-spin fa-fw"></i> 数据加载中</div><div class="bui_p_24 bui_ta_c {{bgc||\'\'}} bui_tc_white_d64" v-if="type==\'success\'"><i class="fa fa-check fa-fw"></i> 加载完成</div>'})),Vue.component("tp-emptypage",Vue.extend({props:["tc","content"],template:"<div class=\"bui_p_24 bui_ta_c bui_ts_16 bui_ts_96_i {{tc||'bui_tc_white_d48'}}\">	<i class=\"bi bi_sentiment_dissatisfied bui_ts_128_i\"></i>	<p>{{content||'蓝瘦~香菇~这里什么都没有！'}}</p></div>"})),Vue.component("tp-titleitem",Vue.extend({props:["title","btn","link"],template:'<div class="bui_p_12 bui_ts_14 bui_media bui_vm">	<div class="bui_media_l"><i class="fa fa-square fa-fw bui_tc_red_i"></i> {{title||\'error\'}}</div>	<div class="bui_media_b"></div>	<div class="bui_media_r"><a v-if="btn" href="{{link||\'javascript:;\'}}" class="bui_bgc_red bui_tc_white_a bui_round bui_block bui_plr_6 bui_ts_12">{{btn}}</a></div></div>'})),Vue.component("com-order-product-item",Vue.extend({props:["title","price","point","nums","imgurl"],template:'<div class="bui_media bui_vm bui_p_12 bui_bds_1_t">	<div class="bui_media_l">		<img src="{{imgurl||\'error\'}}" style="width: 3rem;height: 3rem;" />	</div>	<div class="bui_media_b">		<p class="bui_ts_14">{{title||\'error\'}}</p>		<div class="bui_ts_12 bui_row_p_12 bui_tc_white_d64 bui_inline">			<div v-if="price&&price!=0">单价：<span class="bui_tc_red">{{price}}</span></div>			<div v-if="point&&point!=0">积分：<span class="bui_tc_red">{{point}}</span></div>		</div>	</div>	<div class="bui_media_r">		<p class="bui_ts_20 bui_tc_red">x{{nums||\'error\'}}</p>	</div></div>'})),Vue.component("tp-product-item",Vue.extend({props:["id","title","price","point","pluspricepoint","imgurl","href","type"],template:'<a :href="href" class="bui_bgc_white bui_block bui_bds_1_b bui_bds_1_r bui_ta_c">	<div class="bui_p_12">		<div style="background-image: url({{imgurl}}); background-size:cover; background-position:center center;"><img src="images/1x1.png" class="bui_block" /></div>		<hr class="bui_mtb_6" />		<div class="bui_ts_12 bui_tc_black_l72" style="height:1.6em;overflow: hidden;">{{title}}</div>		<div v-if="type==\'product\'" class="bui_ts_14 bui_tc_red"><i class="fa fa-rmb fa-fw"></i><strong class="bui_ts_24" style="">{{price/100||0}}</strong></div>		<template v-if="type==\'gift\'">			<p class="bui_ts_20 bui_tc_red"><strong>{{point||0}}</strong>积分</p>			<p class="bui_ts_12 bui_tc_white_d64">或<span class="bui_tc_red">{{pluspricepoint||0}}积分</span>加<span class="bui_tc_red">￥{{price||0}}元</span></p>		</template>	</div></a>'})),Vue.component("com-order-price-item",Vue.extend({props:["title","info","tc","payprice","paypoint","origprice","link"],template:'<a href="{{link||\'javascript:;\'}}" class="bui_media bui_vm bui_p_12 bui_bds_1_t bui_block">	<div class="bui_media_l">		<p class="bui_ta_c bui_ts_12 bui_tc_white_d64" style="width: 5rem;">{{title}}：</p>	</div>	<div class="bui_media_b">		<p>{{info}}</p>	</div>	<div class="bui_media_r">		<span class="{{tc||\'bui_tc_green bui_ts_14\'}}" v-if="payprice!=null"><i class="fa fa-rmb fa-fw"></i> {{payprice||0}}</span>		<span class="{{tc||\'bui_tc_green bui_ts_14\'}}" v-if="paypoint!=null"><i class="fa fa-database fa-fw"></i> {{paypoint||0}}</span>		<span class="bui_ts_12 bui_tc_white_d48" style="text-decoration: line-through;" v-if="origprice">{{origprice||0}}</span>	</div></a>'})),Vue.component("tp-img",Vue.extend({props:["src","width","height","class"],template:'<img :src="src||\'./images/seize.png\'" class="{{class}}" style="width:{{width}};height:{{height}}"/>'}))}function global_getUrlDataSetVue(){vm.$set("urlData",{type:buijs_geturl("type")||null,productId:buijs_geturl("productId")||null,productNum:buijs_geturl("productNum")||null,productLabel:buijs_geturl("productLabel")||null,productName:buijs_geturl("productName")||null,orderId:buijs_geturl("orderId")||null,payStatus:buijs_geturl("payStatus")||null,categoryId:buijs_geturl("categoryId")||null,parentMemberId:buijs_geturl("parentMemberId")||null,securityQrcode:buijs_geturl("securityQrcode")||null,sceneCode:buijs_geturl("sceneCode")||null}),vm.$set("urlJson",JSON.parse(buijs_geturl("urlJson"))||{})}function global_getMemberDetailSetVue(i,e,t){global_getMemberDetail({domain:workSpace.jsonUrl,getLocalStorage:e,error:function(){},success:function(e){setTimeout(function(){vm.$set(i||"memberDetail",e),t?t():null},300)}})}function global_showQrcode(i){var e=i?"<p>"+i+"</p>":"";buijs_modal({setid:"global_showQrcode",width:"86%",height:"86%",positions:"center",title:"关注 "+vueData.global.brandName+" 公众号",boxClass:"bui_radius bui_bgc_white bui_tc_black bui_shadow_24",content:'<div class="bui_m_24 bui_ta_c">'+e+'<img src="../mMall/images/metrx_wx.jpg" class="bui_block"/><div class="bui_mt_12 bui_ta_c bui_ts_14">长按上方二维码关注 '+vueData.global.brandName+" 公众号</div></div>",footer:'<div class="bui_p_8"><button class="bui_btn bui_btn_48 bui_bgc_red bui_tc_white bui_block bui_ts_14 bui_radius bui_ta_c" buijs_modal_close>我知道了</button></div>'})}function global_modalTips(i,e,t,a){i=i||"系统检测到您访问的页面出现异常，请检查网络，清理微信缓存或刷新页面",e=e||"点击重试";var s="";s=t?t:-1!=window.location.href.indexOf("?")?window.location.href+"&timestamp="+Date.parse(Date()):window.location.href+"?timestamp="+Date.parse(Date()),t=t||"javascript:window.location.href="+window.location.href,0==$("#errorTipsModal").length&&buijs_modal({setid:"errorTipsModal",width:"72%",positions:"center",isclose:!1,boxClass:"bui_radius bui_bgc_white bui_tc_black bui_shadow_24",content:'<div class="bui_p_24 bui_ta_c">'+i+"</div>",footer:'<div class="bui_p_8"><a href="'+s+'" class="bui_btn bui_btn_48 bui_bgc_red bui_tc_white bui_block bui_ts_14 bui_radius bui_ta_c">'+e+"</a></div>",showAfter:function(){function i(){return $("#errorTipsModal .bui_modal_f .bui_btn").html(e+' <span class="bui_ts_12 bui_tc_white_f48">'+a+"s</span>"),a>=1?a--:(window.clearInterval(s),window.location.href=t),!1}if(a)var s=setInterval(i,1e3)}})}function global_showSidePanel(i,e,t,a,s){i?buijs_modal({setid:i,width:t||"86%",positions:e||"right",boxClass:"bui_bgc_white_d12",header:null,footer:null,ajaxload:i+".html",showAfter:function(){a?a():null,s&&$("#"+i).attr("prop",s)}}):global_modalTips()}function global_showPanelRegin(i){buijs_modal({setid:"global_showPanelRegin",width:"86%",positions:"right",boxClass:"bui_bgc_white_d12",header:null,footer:null,ajaxload:"modal_regson.html",showAfter:function(){$("#global_showPanelRegin").attr("vuesetobj",i)}})}function global_checkCart(i){var e=-1!=window.location.pathname.indexOf("gift_");global_vueGetJson({url:workSpace.jsonUrl+"/shoppingCart/front/findByCurrentMember",vueName:e?"global.cartData.gift":"global.cartData.product",data:{sceneCode:e?"metrxgiftmall":"metrxmall"},success:function(e){i?i(e):null}})}function global_addToCart(i,e,t,a){buijs_mask({type:"loading"}),global_vueGetJson({url:workSpace.jsonUrl+"/shoppingCart/front/addProductIntoCart",data:{productId:i,nums:e||1,sceneCode:t||"metrxmall",type:a||0},success:function(i){buijs_mask_close(),buijs_alert({content:i.msg}),global_checkCart()}})}function global_intercept(i,e,t){buijs_modal({setid:"global_intercept",positions:"center",width:"86%",title:i||"提示",content:'<div class="bui_p_24 bui_ta_c">'+e+"</div>",footer:'<div class="bui_p_8"><div class="bui_avg_2 bui_row_p_12"><li><button class="bui_btn bui_btn_48 bui_ts_16 bui_bgc_white bui_block" buijs_modal_close="global_intercept">再想想</button></li><li><button class="bui_btn bui_btn_48 bui_ts_16 bui_bgc_green bui_block" buijs_modal_true>是</button></li></div></div>',trueAfter:function(){t?t():null,buijs_modal_close("global_intercept")}})}function global_redDotAlert(){vm.$set("redDotAlert.memberDetail",vueData.memberDetail.data.name&&vueData.memberDetail.data.mobilephone&&vueData.memberDetail.data.birthday&&vueData.memberDetail.data.gender?!1:!0),global_vueGetJson({url:workSpace.jsonUrl+"/memberAddress/front/findByCurrentMember",success:function(i){vm.$set("redDotAlert.address",i.queryResult.length>0?!1:!0)}}),global_vueGetJson({url:workSpace.jsonUrl+"/order/front/findByCurrentMember",data:{orderStatus:100},success:function(i){vm.$set("redDotAlert.waitPay",0==i.queryResult.length?!1:!0)}}),global_vueGetJson({url:workSpace.jsonUrl+"/order/front/findByCurrentMember",data:{orderStatus:200},success:function(i){vm.$set("redDotAlert.waitDone",0==i.queryResult.length?!1:!0)}})}buijs_getFile.js=$.extend(buijs_getFile.js,{swiper:workSpace.uiPublicPath+"baidiui_v2.0.3/js/swiper3.08.jquery.min.js",dataTimePicker:workSpace.uiPublicPath+"baidiui_v2.0.3/js/baidiui-datetimepicker.min.js"}),buijs_getFile.css=$.extend(buijs_getFile.css,{bicon:workSpace.uiPublicPath+"baidiui_v2.0.3//css/bicon_v1.0.0/style.min.css",fontAwesome:workSpace.uiPublicPath+"baidiui_v2.0.3//css/font-awesome-4.4.0/css/font-awesome.min.css"});var vueData={global:{jsonUrl:workSpace.jsonUrl,brandName:"美瑞克斯",signId:33,screenSize:$("html").width()}};$(document).ready(function(){project_vueComponent(),global_vue({data:vueData}),global_getUrlDataSetVue(),global_memberLogin(function(){global_checkCart(),global_getMemberPoint(),global_vueGetJson({url:workSpace.jsonUrl+"/wxMember/front/isSubscribe",vueName:"isSubscribe",data:{wxMemberId:vueData.memberDetail.data.wxMember.id}})}),global_wechatGetConfig({jsonUrl:workSpace.jsonUrl+"/wechatJsSdk/front/getJsConfigParams",success:function(){golbal_wechatShare({title:"我正在逛"+vueData.global.brandName+"移动商城",link:workSpace.jsonUrl+"mMall/index.html",desc:"福利这种事，脸皮厚抢个够，脸皮薄拿不着！",imgUrl:workSpace.jsonUrl+"mMall/images/logo-s.png",cancel:function(){buijs_alert({content:"取消分享"})},success:function(){buijs_alert({content:"分享成功"})}})}})}),$(document).ajaxError(function(){global_modalTips()}),$(window).bind("resize",function(){vm.$set("global.screenSize",$("html").width())});